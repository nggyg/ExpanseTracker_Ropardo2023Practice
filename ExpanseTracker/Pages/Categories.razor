@page "/categories"
@using ExpanseTracker.Data

<h3>Categories</h3>

<table>
    @foreach(var cat in Cats)
    {
        <tr>
            <td>@cat.Id. @cat.Name</td>
            <td></td>
            <td><button @onclick="()=>remove_cat(cat)">delete</button></td>
        </tr>
    }
</table>

<input placeholder="New     Category" @bind="New_cat" />
<button @onclick="add_cat">Add Category</button>

@code {
    private List<Category> Cats = new List<Category>();
    private int New_id = 1;
    public string? New_cat;
    public void loadDefault()
    {
        Cats.Add(new(get_new_id(), "Food"));
        Cats.Add(new(get_new_id(), "House"));
        Cats.Add(new(get_new_id(), "Entertainment"));
    }
      
    private int get_new_id()
    {
        return New_id++;
    }
    public void add_cat()
    {
        if (!string.IsNullOrWhiteSpace(New_cat))
        {
            Cats.Add(new(get_new_id(), New_cat));
            New_cat = string.Empty;
        }

    }
    public void remove_cat(Category todo)
    {
        Cats.Remove(todo);
    }
    protected override async Task OnInitializedAsync()
    {
        loadDefault();
    }
}
